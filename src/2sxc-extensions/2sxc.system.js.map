{"version":3,"file":"2sxc.system.js","sourceRoot":"","sources":["2sxc.system.ts"],"names":[],"mappings":";;AAIA,kFAAkF;AAClF,CAAC;IACG,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC,CAAC,CAAC;QAC7C,MAAM,CAAC;IACX,CAAC;IAED,KAAK,CAAC,MAAM,GAAG;QACX,aAAa,EAAE,aAAa;KAC/B,CAAC;IAEF,wEAAwE;IACxE,uBAAuB,UAAU;QAC7B,IAAI,EAAE,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC;QAC3B,CAAC,CAAC,IAAI,CAAC;YACH,IAAI,EAAE,KAAK;YACX,GAAG,EAAE,EAAE,CAAC,iBAAiB,CAAC,gCAAgC,CAAC;YAC3D,UAAU,EAAE,CAAC,CAAC,iBAAiB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,gBAAgB;SAC1D,CAAC,CAAC,OAAO,CAAC;YACP,KAAK,CAAC,iDAAiD,CAAC,CAAC;YACzD,QAAQ,CAAC,MAAM,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;QACH,KAAK,CAAC,oGAAoG,CAAC,CAAC;IAChH,CAAC;AACL,CAAC,CAAC,EAAE,CAAC","sourcesContent":["import { Window } from '../interfaces/window';\r\n\r\ndeclare var window: Window;\r\n\r\n// this enhances the $2sxc client controller with stuff only needed when logged in\r\n(function () {\r\n    if (!(window.$2sxc /*|| window.$2sxc.system*/)) {\r\n        return;\r\n    }\r\n\r\n    $2sxc.system = {\r\n        finishUpgrade: finishUpgrade\r\n    };\r\n\r\n    // upgrade command - started when an error contains a link to start this\r\n    function finishUpgrade(domElement) {\r\n        var mc = $2sxc(domElement);\r\n        $.ajax({\r\n            type: \"get\",\r\n            url: mc.resolveServiceUrl(\"view/module/finishinstallation\"),\r\n            beforeSend: $.ServicesFramework(mc.id).setModuleHeaders\r\n        }).success(function () {\r\n            alert(\"Upgrade ok, restarting the CMS and reloading...\");\r\n            location.reload();\r\n        });\r\n        alert(\"starting upgrade. This could take a few minutes. You'll see an 'ok' when it's done. Please wait...\");\r\n    }\r\n})();"]}