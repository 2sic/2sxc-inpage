{"version":3,"file":"toolbarManager.generateButtonHtml.js","sourceRoot":"","sources":["toolbarManager.generateButtonHtml.ts"],"names":[],"mappings":"AAAA,CAAC;IACG,KAAK,CAAC,eAAe,CAAC,kBAAkB,GAAG,kBAAkB,CAAC;IAC9D,MAAM,CAAC;IAEP,wDAAwD;IACxD,qGAAqG;IACrG,iCAAiC,MAAM;QACnC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC;YAAC,MAAM,CAAC;QAElE,IAAI,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAC;QAClD,MAAM,CAAC,aAAa,GAAG,CAAC,QAAQ,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC,CAAC,8BAA8B;QACzF,EAAE,CAAC,CAAC,QAAQ,CAAC,QAAQ,KAAK,SAAS,CAAC;YAAC,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;QACzE,EAAE,CAAC,CAAC,QAAQ,CAAC,SAAS,KAAK,SAAS,CAAC;YAAC,MAAM,CAAC,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;QAC5E,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC,qBAAqB;IAC/C,CAAC;IAED,iCAAiC;IACjC,uFAAuF;IACvF,4BAA4B,GAAG,EAAE,MAAM,EAAE,UAAU;QAE/C,kGAAkG;QAClG,uBAAuB,CAAC,MAAM,CAAC,CAAC;QAEhC,yCAAyC;QACzC,IAAI,WAAW,GAAG,QAAQ,GAAG,UAAU,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,EAC1E,WAAW,GAAG,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,EAC/C,GAAG,GAAG,CAAC,CAAC,QAAQ,CAAC,EACjB,MAAM,GAAG,CAAC,CAAC,aAAa,GAAG,MAAM,CAAC,IAAI,GAAG,8BAA8B,CAAC,EACxE,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;YAC3B,EAAE,CAAC,CAAC;YACJ,QAAQ,GAAG,GAAG,CAAC,EAAE,GAAG,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,WAAW,CAAC;QAEzG,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE;YAAE,WAAW,IAAI,GAAG,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;QAEjF,IAAI,MAAM,GAAG,CAAC,CAAC,OAAO,EAAE;YACpB,OAAO,EAAE,KAAK,GAAG,MAAM,CAAC,MAAM,GAAG,GAAG,GAAG,WAAW;gBAC9C,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,GAAG,GAAG,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;YACtE,SAAS,EAAE,OAAO;YAClB,WAAW,EAAE,SAAS,GAAG,MAAM,CAAC,KAAK;SACxC,CAAC,CAAC;QACH,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;QAC9B,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IAC/B,CAAC;AACL,CAAC,CAAC,EAAE,CAAC","sourcesContent":["(function () {\r\n    $2sxc._toolbarManager.generateButtonHtml = generateButtonHtml;\r\n    return;\r\n\r\n    // does some clean-up work on a button-definition object\r\n    // because the target item could be specified directly, or in a complex internal object called entity\r\n    function flattenActionDefinition(actDef) {\r\n        if (!actDef.entity || !actDef.entity._2sxcEditInformation) return;\r\n\r\n        var editInfo = actDef.entity._2sxcEditInformation;\r\n        actDef.useModuleList = (editInfo.sortOrder !== undefined); // has sort-order, so use list\r\n        if (editInfo.entityId !== undefined) actDef.entityId = editInfo.entityId;\r\n        if (editInfo.sortOrder !== undefined) actDef.sortOrder = editInfo.sortOrder;\r\n        delete actDef.entity; // clean up edit-info\r\n    }\r\n\r\n    // generate the html for a button\r\n    // Expects: instance sxc, action-definition, + group-index in which the button is shown\r\n    function generateButtonHtml(sxc, actDef, groupIndex) {\r\n\r\n        // if the button belongs to a content-item, move the specs up to the item into the settings-object\r\n        flattenActionDefinition(actDef);\r\n\r\n        // retrieve configuration for this button\r\n        var showClasses = \"group-\" + groupIndex + (actDef.disabled ? \" disabled\" : \"\"),\r\n            classesList = (actDef.classes || \"\").split(\",\"),\r\n            box = $(\"<div/>\"),\r\n            symbol = $(\"<i class=\\\"\" + actDef.icon + \"\\\" aria-hidden=\\\"true\\\"></i>\"),\r\n            onclick = actDef.disabled ?\r\n            \"\" :\r\n            \"$2sxc(\" + sxc.id + \", \" + sxc.cbid + \").manage.run(\" + JSON.stringify(actDef.command) + \", event);\";\r\n\r\n        for (var c = 0; c < classesList.length; c++) showClasses += \" \" + classesList[c];\r\n\r\n        var button = $(\"<a />\", {\r\n            'class': \"sc-\" + actDef.action + \" \" + showClasses +\r\n                (actDef.dynamicClasses ? \" \" + actDef.dynamicClasses(actDef) : \"\"),\r\n            'onclick': onclick,\r\n            'data-i18n': \"[title]\" + actDef.title\r\n        });\r\n        button.html(box.html(symbol));\r\n        return button[0].outerHTML;\r\n    }\r\n})();"]}